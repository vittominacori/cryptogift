(window.webpackJsonp=window.webpackJsonp||[]).push([[6,15],{145:function(t,e,a){"use strict";a.r(e);var r={name:"SmallGiftBox",props:{gift:{type:Object,default:{}},network:{type:Object,default:{}}},computed:{image:function(){return"assets/images/"+(this.gift.style?"styles/".concat(this.gift.style,".jpg"):"cryptogift-header.jpg")},formattedDate:function(){return new Date(this.gift.date).toLocaleString()},tokenExplorerLink:function(){return this.network.etherscanLink+"/token/0x970E90Db5bFd3E4dEa453fb061E1146eE3e23Df8?a="+this.gift.id},beneficiaryLink:function(){return this.network.etherscanLink+"/address/"+this.gift.beneficiary+"#internaltx"}}},n=a(5),i=Object(n.a)(r,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-card",{staticClass:"shadow border-0 rounded-0",attrs:{"no-body":""}},[a("b-card-body",[a("b-row",[a("b-col",{attrs:{md:"8"}},[a("h6",[t._v(t._s(t.gift.content.sender))])]),t._v(" "),a("b-col",{staticClass:"text-right",attrs:{md:"4"}},[t.gift.id?a("b-badge",{staticClass:"float-right",attrs:{href:t.tokenExplorerLink,target:"_blank",variant:"secondary"}},[t._v("\n                    #"+t._s(t.gift.id)+"\n                ")]):t._e()],1)],1),t._v(" "),a("b-row",[a("b-col",{attrs:{md:"12"}},[a("strong",[t._v(t._s(t.gift.amount)+" ETH")])])],1)],1),t._v(" "),a("b-card-footer",[a("b-row",[a("b-col",{attrs:{md:"8"}},[a("b-link",{attrs:{target:"_blank",href:t.gift.tokenLink}},[a("small",[t._v("View details")])])],1),t._v(" "),a("b-col",{staticClass:"text-right",attrs:{md:"4"}},[a("small",[t._v(t._s(t.formattedDate))])])],1)],1)],1)},[],!1,null,null,null);e.default=i.exports},199:function(t,e,a){"use strict";a.r(e);a(45),a(126);var r,n,i,s,o=a(127),c=a(129),l=a(130),d=a(132),u=a(140),v=a.n(u),h=a(128),g=a(145),f={name:"Coronavirus",mixins:[c.a,l.a,d.a],components:{GiftBox:h.default,SmallGiftBox:g.default},data:function(){return{closed:!0,loading:!0,currentNetwork:null,price:0,trxHash:"",trxLink:"",tokenLink:"",qrcode:"",makingTransaction:!1,encryptionKey:"#againstcoronavirus",gift:{beneficiary:"0xd712847702DFda2B70BEa86Ceb7cf81468D2392E",content:{sender:"",receiver:"Italy",message:""},date:new Date,style:3,amount:"",privacyAndTerms:!1},donationList:[],donationsNumber:0,pagination:{page:1,limit:12}}},computed:{totalPrice:function(){var t=new this.web3.BigNumber(this.price),e=new this.web3.BigNumber(this.gift.amount||0);return t.add(e).valueOf()}},mounted:function(){this.currentNetwork=this.network.default,this.initDapp()},methods:{initDapp:(s=Object(o.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.network.current=this.network.list[this.currentNetwork],t.prev=1,t.next=4,this.initWeb3(this.currentNetwork,!0);case 4:this.initContracts(),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),alert(t.t0),document.location.href=this.$withBase("/");case 11:case"end":return t.stop()}},t,this,[[1,7]])})),function(){return s.apply(this,arguments)}),ready:(i=Object(o.a)(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.$validator.extend("eth_address",{getMessage:function(t){return"Insert a valid Ethereum wallet address."},validate:function(t){return e.web3.isAddress(t)}}),t.next=3,this.getDonationsData();case 3:return this.loading=!1,t.next=6,this.getToken(this.donationsNumber);case 6:case"end":return t.stop()}},t,this)})),function(){return i.apply(this,arguments)}),createGift:function(){var t=this;this.metamask.installed?this.metamask.netId===this.network.current.id?this.$validator.validateAll().then(function(){var e=Object(o.a)(regeneratorRuntime.mark(function e(a){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=16;break}if(e.prev=1,t.trxHash="",t.trxLink="",t.tokenLink="",t.makingTransaction=!0,t.legacy){e.next=9;break}return e.next=9,t.web3Provider.enable();case 9:setTimeout(function(){var e=t.encrypt(JSON.stringify(t.gift.content),t.encryptionKey),a=t.gift.beneficiary||t.web3.eth.coinbase;t.instances.market.buyToken(a,e,new Date(t.gift.date).getTime()/1e3,t.gift.style,{value:t.web3.toWei(t.totalPrice,"ether"),from:t.web3.eth.coinbase},function(e,r){e?(t.makingTransaction=!1,alert("Some error occurred. Maybe you rejected the transaction or you have MetaMask locked!")):(t.trxHash=r,t.trxLink=t.network.current.etherscanLink+"/tx/"+t.trxHash,t.instances.market.TokenPurchase({purchaser:t.web3.eth.coinbase,beneficiary:a},function(e,a){e?(t.makingTransaction=!1,alert("Some error occurred. Maybe transaction failed for some reasons. Check your transaction id.")):(t.tokenLink=window.location.origin+t.$withBase("/view.html?id=".concat(a.args.tokenId.valueOf())),t.generateQRCode())}))})},500),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),t.makingTransaction=!1,alert("Some error occurred. Maybe you rejected the transaction or you have MetaMask locked!");case 16:case"end":return e.stop()}},e,this,[[1,12]])}));return function(t){return e.apply(this,arguments)}}()):alert("Your MetaMask in on the wrong network. Please switch on ".concat(this.network.current.name," and try again!")):alert("To create a CryptoGift please install MetaMask!")},preview:function(){var t=this;this.$validator.validateAll().then(function(){var e=Object(o.a)(regeneratorRuntime.mark(function e(a){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a&&t.$refs.giftPreview.show();case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())},generateQRCode:function(){var t=this;this.tokenLink&&v.a.toDataURL(this.tokenLink).then(function(e){t.qrcode=e}).catch(function(t){console.error(t)})},loadMore:function(){this.pagination.page++,this.getToken(this.donationsNumber-this.donationList.length)},getDonationsData:(n=Object(o.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.t0=parseInt,t.next=4,this.promisify(this.instances.token.totalSupply);case 4:t.t1=t.sent.valueOf(),this.donationsNumber=(0,t.t0)(t.t1),t.next=11;break;case 8:t.prev=8,t.t2=t.catch(0),console.log(t.t2);case 11:case"end":return t.stop()}},t,this,[[0,8]])})),function(){return n.apply(this,arguments)}),getToken:(r=Object(o.a)(regeneratorRuntime.mark(function t(e){var a,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.promisify(this.instances.token.getGift,e);case 3:a=t.sent,r=this.formatStructure(e,a),this.donationList.push(r),this.donationList.length%(this.pagination.limit*this.pagination.page)!=0&&this.donationList.length<this.donationsNumber&&this.getToken(this.donationsNumber-this.donationList.length),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log("Some error occurred. Check your Encryption Key");case 12:case"end":return t.stop()}},t,this,[[0,9]])})),function(t){return r.apply(this,arguments)}),formatStructure:function(t,e){try{return{id:t,amount:parseFloat(this.web3.fromWei(e[0])),purchaser:e[1],beneficiary:e[2],content:JSON.parse(JSON.parse(this.web3.toAscii(this.decrypt(e[3],this.encryptionKey)))),date:1e3*e[4].valueOf(),style:e[5],visible:!0,tokenLink:window.location.origin+this.$withBase("/view.html?id=".concat(t))}}catch(t){}return{id:t,visible:!1}}}},m=a(5),b=Object(m.a)(f,function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.loading?t._e():a("div",[t.makingTransaction?[a("b-row",[a("b-col",{attrs:{lg:"8","offset-lg":"2"}},[t.tokenLink?a("b-card",{staticClass:"shadow mb-3 border-0 rounded-0",attrs:{"img-src":t.$withBase("assets/images/cryptogift-header.jpg"),title:"View your unique CryptoGift on the Blockchain.","bg-variant":"light"}},[a("b-row",[a("b-col",{staticClass:"mb-2",attrs:{md:"9"}},[a("p",{staticClass:"card-text"},[a("b-button",{attrs:{variant:"outline-success",target:"_blank",href:t.tokenLink}},[t._v(t._s(t.tokenLink))])],1),t._v(" "),a("p",{staticClass:"card-text"},[t._v("\n                                Visit the link above or scan the QR Code."),a("br"),t._v("\n                                Find out who sent it to you and what he wants to say."),a("br"),a("br"),t._v("\n                                Your encryption key: "),a("b-badge",{staticClass:"p-2",attrs:{variant:"info"}},[t._v(t._s(t.encryptionKey))])],1)]),t._v(" "),a("b-col",{staticClass:"mb-2",attrs:{md:"3"}},[t.qrcode?a("b-img",{attrs:{src:t.qrcode,"fluid-grow":""}}):t._e(),t._v(" "),a("b-button",{staticClass:"d-print-none mt-3",attrs:{variant:"link"},on:{click:t.print}},[t._v("Print your Gift")])],1)],1)],1):t._e(),t._v(" "),a("b-alert",{staticClass:"d-print-none",attrs:{show:"",variant:"warning"}},[a("h6",[t._v("Your encryption key is "),a("b",[t._v(t._s(t.encryptionKey))])]),t._v(" "),a("b",[t._v("Do not lose it!")]),t._v(" It cannot be recovered if you lose it. It allows receiver to decrypt your message. You "),a("b",[t._v("must")]),t._v(" copy and share it with receiver.\n                ")]),t._v(" "),t.trxHash?[a("b-alert",{staticClass:"d-print-none",attrs:{show:"",variant:"success"}},[a("h4",{staticClass:"alert-heading"},[t._v("Well! Transaction done!")]),t._v(" "),a("div",{staticClass:"text-truncate"},[t._v("\n                            TxHash "),a("b-link",{attrs:{href:t.trxLink,target:"_blank"}},[t._v(t._s(t.trxHash))])],1)]),t._v(" "),t.tokenLink?t._e():a("b-alert",{attrs:{show:"",variant:"light"}},[a("h4",{staticClass:"alert-heading"},[t._v("Retrieving CryptoGift. Do not refresh the page.")]),t._v(" "),a("ui--loader",{attrs:{loading:!0}})],1)]:a("b-alert",{attrs:{show:"",variant:"light"}},[a("h4",{staticClass:"alert-heading"},[t._v("Making transaction. Do not refresh the page.")]),t._v(" "),a("ui--loader",{attrs:{loading:!0}})],1)],2)],1)]:[a("b-alert",{attrs:{show:"",variant:"warning"}},[a("h4",{staticClass:"alert-heading"},[t._v("Help Italy against Coronavirus (COVID-19)")]),t._v(" "),a("p",[t._v("\n                We are experiencing an unprecedented moment in history and the lives of every one of us has been affected.\n                Many of us are taking action to cope with an event that has so suddently struck the lives of the Italian people and many others across the globe."),a("br"),t._v("\n                Be present by entering the below "),a("b-badge",{attrs:{variant:"danger"}},[t._v("#againstcoronavirus")]),t._v(" campaign."),a("br")],1),t._v(" "),a("hr"),t._v(" "),a("p",[a("b-link",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"how-it-works",expression:"'how-it-works'"}]},[t._v("How it works?")])],1),t._v(" "),a("b-collapse",{attrs:{id:"how-it-works"}},[a("p",[t._v("\n                    By entering this campaign you will create a "),a("b-link",{attrs:{to:"/about.html",target:"_blank"}},[t._v("CryptoGift")]),t._v(" donating\n                    an amount of Ether to this "),a("b-link",{attrs:{href:t.network.current.etherscanLink+"/address/"+t.gift.beneficiary,target:"_blank"}},[t._v("ETH address")]),t._v("."),a("br"),t._v("\n                    No commission will be collected on donations made during this fundraising initiative."),a("br"),t._v("\n                    100% of each donation will be converted about on April 1, 2020 and donated to\n                    "),a("b-link",{attrs:{href:"https://www.charitystars.com/collection/wewin",target:"_blank"}},[t._v("CharityStars")]),t._v("'\n                    "),a("b",[t._v("#WeWin")]),t._v(" campaign to support the Luigi Sacco Hospital in Milan,\n                    the San Matteo Hospital in Pavia, the Spallanzani Hospital in Rome and the Italian Red Cross."),a("br"),t._v("\n                    You will find this donation as made from "),a("b",[t._v("CryptoGift")]),t._v(" on CharityStars' campaign page.\n                ")],1),t._v(" "),a("hr"),t._v(" "),a("small",[t._v("\n                    NOTE: CryptoGift encrypt your message using Advanced Encryption Standard (AES) and, usually,\n                    allows you to choose an encryption key during CryptoGift building.\n                    Your data lives on the blockchain but only who hold the key will be able to decrypt your message\n                    (as explained in our "),a("b-link",{attrs:{target:"_blank",to:"/privacy-policy.html"}},[t._v("Privacy policy")]),t._v(").\n                    For donations made using this page, instead, encryption key will be forced to be "+t._s(t.encryptionKey)+" in order\n                    to show latest donations below. So your message could be visible to people who use this key to decrypt your message.\n                ")],1)])],1),t._v(" "),a("b-form",{on:{submit:function(e){return e.preventDefault(),t.createGift(e)}}},[a("fieldset",{attrs:{disabled:!t.metamask.installed||t.closed}},[a("b-row",[a("b-col",{staticClass:"mb-4",attrs:{lg:"7"}},[a("b-card",{staticClass:"shadow",attrs:{"bg-variant":"light"}},[a("b-form-group",{attrs:{id:"gift-sender-group",label:"Sender Name:","label-for":"gift-sender"}},[a("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":t.errors.has("gift-sender")},attrs:{id:"gift-sender",name:"gift-sender",type:"text",size:"lg","data-vv-as":"Sender",placeholder:"Enter your name"},model:{value:t.gift.content.sender,callback:function(e){t.$set(t.gift.content,"sender",e)},expression:"gift.content.sender"}}),t._v(" "),a("small",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("gift-sender"),expression:"errors.has('gift-sender')"}],staticClass:"text-danger"},[t._v("\n                                    "+t._s(t.errors.first("gift-sender"))+"\n                                ")])],1),t._v(" "),a("b-form-group",{attrs:{id:"gift-message-group",label:"Message:","label-for":"gift-message",description:"The awesome message you want to send."}},[a("b-form-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":t.errors.has("gift-message")},attrs:{id:"gift-message",name:"gift-message","data-vv-as":"Message",placeholder:"Enter your message",rows:7,"no-resize":!0},model:{value:t.gift.content.message,callback:function(e){t.$set(t.gift.content,"message",e)},expression:"gift.content.message"}}),t._v(" "),a("small",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("gift-message"),expression:"errors.has('gift-message')"}],staticClass:"text-danger"},[t._v("\n                                    "+t._s(t.errors.first("gift-message"))+"\n                                ")])],1),t._v(" "),a("b-form-group",[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.gift.privacyAndTerms,expression:"gift.privacyAndTerms"}],staticClass:"form-check-input",class:{"is-invalid":t.errors.has("gift-privacy-and-terms")},attrs:{type:"checkbox",id:"gift-privacy-and-terms",name:"gift-privacy-and-terms",value:"1"},domProps:{checked:Array.isArray(t.gift.privacyAndTerms)?t._i(t.gift.privacyAndTerms,"1")>-1:t.gift.privacyAndTerms},on:{change:function(e){var a=t.gift.privacyAndTerms,r=e.target,n=!!r.checked;if(Array.isArray(a)){var i=t._i(a,"1");r.checked?i<0&&t.$set(t.gift,"privacyAndTerms",a.concat(["1"])):i>-1&&t.$set(t.gift,"privacyAndTerms",a.slice(0,i).concat(a.slice(i+1)))}else t.$set(t.gift,"privacyAndTerms",n)}}}),t._v(" "),a("label",{staticClass:"form-check-label",attrs:{for:"gift-privacy-and-terms"}},[t._v("\n                                        I've read and agreed the CryptoGift "),a("b-link",{attrs:{target:"_blank",href:t.$withBase("/terms-of-use.html")}},[t._v("Terms of use")]),t._v(" and "),a("b-link",{attrs:{target:"_blank",href:t.$withBase("/privacy-policy.html")}},[t._v("Privacy policy")]),t._v(".\n                                    ")],1)])])],1)],1),t._v(" "),a("b-col",{staticClass:"mb-4",attrs:{lg:"5"}},[a("b-card",{staticClass:"shadow",attrs:{"bg-variant":"light"}},[t.closed?a("b-alert",{attrs:{show:"",variant:"danger"}},[a("h4",{staticClass:"alert-heading"},[t._v("Campaign closed")]),t._v(" "),a("p",[t._v("\n                                    Thank you all for your participiation."),a("br"),t._v("\n                                    View results on "),a("b-link",{attrs:{href:"https://www.charitystars.com/project/vinciamonoi",target:"_blank"}},[t._v("CharityStars")]),t._v("'s page.\n                                ")],1)]):t._e(),t._v(" "),t.metamask.installed||t.closed?t.metamask.netId===t.network.current.id||t.closed?t._e():a("b-alert",{attrs:{show:"",variant:"warning"}},[t._v("\n                                You are on the wrong Network."),a("br"),t._v("Please switch your MetaMask on "),a("b",[t._v(t._s(t.network.current.name))]),t._v(".\n                            ")]):a("b-alert",{attrs:{show:"",variant:"warning"}},[t._v("\n                                You need "),a("b-link",{attrs:{href:"https://metamask.io/",target:"_blank"}},[t._v("MetaMask")]),t._v(" extension.\n                            ")],1),t._v(" "),a("b-form-group",{attrs:{id:"gift-value-group",label:"Donation Value:","label-for":"gift-value"}},[a("b-input-group",{attrs:{append:"ETH"}},[a("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0,min_value:.01,decimal:4},expression:"{ required: true, min_value: 0.01, decimal: 4 }"}],class:{"is-invalid":t.errors.has("gift-value")},attrs:{id:"gift-value",name:"gift-value",step:"any",type:"number",min:"0",size:"lg","data-vv-as":"Value",placeholder:"Enter donation value in ETH"},model:{value:t.gift.amount,callback:function(e){t.$set(t.gift,"amount",e)},expression:"gift.amount"}})],1),t._v(" "),a("small",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("gift-value"),expression:"errors.has('gift-value')"}],staticClass:"text-danger"},[t._v("\n                                    "+t._s(t.errors.first("gift-value"))+"\n                                ")])],1),t._v(" "),a("b-list-group",{staticClass:"mb-4"},[a("b-list-group-item",{staticClass:"d-flex justify-content-between align-items-center",attrs:{variant:"light"}},[t._v("\n                                    Donation Value "),a("b-badge",{attrs:{variant:"light",pill:""}},[t._v(t._s(t.gift.amount||0)+" ETH")])],1),t._v(" "),a("b-list-group-item",{staticClass:"d-flex justify-content-between align-items-center",attrs:{variant:"light"}},[t._v("\n                                    CryptoGift Cost "),a("b-badge",{attrs:{variant:"light",pill:""}},[t._v(t._s(t.price)+" ETH")])],1),t._v(" "),a("b-list-group-item",{staticClass:"d-flex justify-content-between align-items-center"},[t._v("\n                                    Total "),a("b-badge",{attrs:{variant:"light",pill:""}},[t._v(t._s(t.totalPrice)+" ETH")])],1)],1),t._v(" "),a("b-button",{staticClass:"mb-2",attrs:{type:"submit",variant:"outline-success",size:"lg"}},[t._v("Send your Donation")]),t._v(" "),a("b-button",{staticClass:"mb-2",attrs:{variant:"outline-info",size:"lg"},on:{click:t.preview}},[t._v("Preview")])],1)],1)],1)],1)]),t._v(" "),t.donationList.length>0?a("b-row",[a("b-col",{attrs:{lg:"12"}},[a("b-card",{staticClass:"shadow border-0 rounded-0 my-2",attrs:{"no-body":"",header:"Latest donations ❤️"}}),t._v(" "),a("b-alert",{attrs:{variant:"info",show:""}},[t._v("Note: use "),a("b",[t._v(t._s(t.encryptionKey))]),t._v(" to decrypt.")]),t._v(" "),a("b-row",{staticClass:"mt-1"},t._l(t.donationList,function(e){return e.visible?a("b-col",{key:e.id,staticClass:" mt-2 px-3",attrs:{md:"12"}},[a("small-gift-box",{attrs:{gift:e,network:t.network.current}})],1):t._e()}),1),t._v(" "),t.donationList.length<t.donationsNumber?a("b-row",{staticClass:"my-5"},[a("b-col",{staticClass:"text-center",attrs:{md:"12"}},[a("b-btn",{attrs:{size:"lg",variant:"outline-light"},on:{click:t.loadMore}},[t._v("\n                            Load more\n                        ")])],1)],1):t._e()],1)],1):t._e()],t._v(" "),a("b-modal",{ref:"giftPreview",attrs:{"hide-footer":"","body-bg-variant":"warning",size:"lg",title:"CryptoGift Preview"}},[a("gift-box",{attrs:{gift:t.gift,network:t.network.current}})],1)],2)},[],!1,null,null,null);e.default=b.exports}}]);